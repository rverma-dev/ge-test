{"version":3,"file":"tidb-test.js","mappings":"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","sources":["webpack://typescript/external commonjs \"k6/execution\"","webpack://typescript/./src/tidb-createGE-test.ts","webpack://typescript/./src/tidb-insertData-test.ts","webpack://typescript/./src/tidb-joinData-test.ts","webpack://typescript/./src/tidb-readData-test.ts","webpack://typescript/external commonjs \"https://jslib.k6.io/k6-utils/1.2.0/index.js\"","webpack://typescript/external commonjs \"k6/metrics\"","webpack://typescript/external commonjs \"k6/x/sql\"","webpack://typescript/webpack/bootstrap","webpack://typescript/webpack/runtime/compat get default export","webpack://typescript/webpack/runtime/define property getters","webpack://typescript/webpack/runtime/hasOwnProperty shorthand","webpack://typescript/webpack/runtime/make namespace object","webpack://typescript/./src/tidb-test.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"k6/execution\");","/* @ts-ignore */\nimport sql from 'k6/x/sql';\n/* @ts-ignore */\nimport {randomIntBetween} from \"https://jslib.k6.io/k6-utils/1.2.0/index.js\";\nimport exec from 'k6/execution';\nimport {Counter} from 'k6/metrics';\n\n// Database connection setup\nconst dbHost = __ENV.DB_HOST || \"10.0.132.214\";\nconst dbPort = __ENV.DB_PORT || \"4000\";\nconst dbName = __ENV.DB_NAME || \"test\";\nconst dbUser = __ENV.DB_USER || \"root\";\nconst dbPassword = __ENV.TIDB_PASSWORD || \"password\";\n\nconst connectionString = `${dbUser}:${dbPassword}@tcp(${dbHost}:${dbPort})/${dbName}?tls=skip-verify`;\nconst db = sql.open('mysql', connectionString);\nconst tables = new Counter('total_tables');\nconst types = ['VARCHAR(255)', 'BIGINT', 'DATETIME(5)'];\n\nlet scenarios = {\n    createGE: {\n        executor: 'ramping-vus',\n        exec: 'createGE',\n        startVUs: 20,\n        startTime: '0',\n        stages: [\n            {duration: '2m', target: 50}, // Stay at 50 VUs for the first 5 minutes\n            {duration: '4m', target: 50}, // Reduce to 20 VUs over the next 10 minutes\n            {duration: '2m', target: 20}   // Further reduce to 10 VUs for the last 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    }\n};\n\n// Options configuration\nexport const options = {\n    discardResponseBodies: true,\n    scenarios: scenarios,\n};\n\n// Type guard to check if the error is a DBError\nfunction isDBError(error: unknown): error is DBError {\n    return (error as DBError).value !== undefined;\n}\n\nexport function setup() {\n    // FIXME: this will cause hotspot and uneven spread on region servers due to auto increment\n    db.exec(`CREATE TABLE IF NOT EXISTS test.ge_metadata\n             (\n                 id        INT AUTO_INCREMENT PRIMARY KEY,\n                 tenant_id INT          NOT NULL,\n                 ge_name   VARCHAR(255) NOT NULL,\n                 columns   JSON         NOT NULL,\n                 indexes   JSON         NOT NULL\n             ) AUTO_ID_CACHE 1;`);\n}\n\n// Teardown function\nexport function teardown() {\n    db.close();\n}\n\n// Function to generate random columns\nfunction generateRandomColumns(): Column[] {\n    let columns: Column[] = [];\n    let numCols = randomIntBetween(3, 10); // Generate between 3 to 10 columns\n    let columnNames = new Set<string>(); // To track unique column names\n\n    // Ensure the first column (primary key) is either VARCHAR(255) or BIGINT with skew 80% bigint\n    let primaryType = randomIntBetween(0, 9) > 7 ? 'VARCHAR(255)' : 'BIGINT';\n    let primaryColName = `col_${randomIntBetween(1000, 9999)}`;\n    columns.push({ name: primaryColName, type: primaryType });\n    columnNames.add(primaryColName);\n\n    // Generate the rest of the columns\n    while (columns.length < numCols) {\n        let type = types[randomIntBetween(0, types.length - 1)];\n        let colName = `col_${randomIntBetween(1000, 9999)}`;\n\n        // Ensure the column name is unique\n        if (!columnNames.has(colName)) {\n            columns.push({ name: colName, type: type });\n            columnNames.add(colName);\n        }\n    }\n    return columns;\n}\n\n// Function to select random indexes from the columns\nfunction selectRandomIndexes(columns: Column[], maxIndexes: number): Column[] {\n    let selectedIndexes = new Set<Column>(); // To keep track of selected indexes\n    while (selectedIndexes.size < Math.min(maxIndexes, columns.length)) {\n        const randomIndex = randomIntBetween(0, columns.length - 1);\n        selectedIndexes.add(columns[randomIndex]);\n    }\n    return Array.from(selectedIndexes);\n}\n\n// Create GE scenario\nexport function createGE(): void {\n    const tenantId = 1 + exec.vu.idInTest;\n    const geName = `ge_${exec.vu.iterationInScenario}`;\n    const columns = generateRandomColumns();\n    const [primaryKeyCol, ...otherColumns] = columns;\n    const indexes = selectRandomIndexes(otherColumns, 2);  // Select up to 2 columns for indexing\n    const createTableSQL = `CREATE TABLE tenant_${tenantId}_${geName}\n    (\n        ${primaryKeyCol.name}\n        ${primaryKeyCol.type === 'BIGINT' ? 'BIGINT AUTO_RANDOM' : primaryKeyCol.type}\n        ${otherColumns.map(({name, type}) => `, ${name} ${type}`).join('')},\n        PRIMARY KEY ( ${primaryKeyCol.name} )\n        );`;\n    const insertMetaSQL = `INSERT INTO ge_metadata (tenant_id, ge_name, columns, indexes)\n                           VALUES (${tenantId}, '${geName}',\n                                   '${JSON.stringify(columns)}',\n                                   '${JSON.stringify(indexes)}');`\n\n    // Create table\n    try {\n        db.exec(createTableSQL);\n        // Create indexes\n        indexes.forEach(indexCol => {\n            let createIndexSQL = `CREATE INDEX IF NOT EXISTS idx_${indexCol.name} ON tenant_${tenantId}_${geName} (${indexCol.name});`;\n            try {\n                db.exec(createIndexSQL);\n            } catch (error) {\n                console.error(`Error creating index on column ${indexCol.name} for tenant_${tenantId}_${geName}: ${error}`);\n                console.error(`Failed SQL: ${createIndexSQL}`);\n            }\n        });\n\n        // Insert metadata\n        try {\n            db.exec(insertMetaSQL);\n            tables.add(1);\n            console.log(`Table tenant_${tenantId}_${geName} created successfully`);\n        } catch (error) {\n            console.error(`Error inserting metadata for tenant_${tenantId}_${geName}: ${error}`);\n            console.error(`Failed SQL: ${insertMetaSQL}`);\n        }\n    } catch (error) {\n        if (isDBError(error) && error.value.number != 1050) {\n            console.error(`Error creating table tenant_${tenantId}_${geName}: ${error}`);\n            console.error(`Failed SQL: ${createTableSQL}`);\n            return; // Exit the function if table creation fails\n        }\n    }\n}\n\n/* \nResult\n\ndata_received........: 0 B 0 B/s\ndata_sent............: 0 B 0 B/s\niteration_duration...: avg=51.16s min=68.45µs med=57.7s max=1m12s p(90)=1m7s p(95)=1m9s\niterations...........: 230 0.602096/s\ntotal_tables.........: 230 0.602096/s\nvus..................: 0   min=0      max=50\nvus_max..............: 50  min=50     max=50\n\n\nDB side avg create \n\n*/","/* @ts-ignore */\nimport sql from 'k6/x/sql';\n/* @ts-ignore */\nimport {randomIntBetween, randomString} from \"https://jslib.k6.io/k6-utils/1.2.0/index.js\";\nimport {Counter} from 'k6/metrics';\n\n// Database connection setup\nconst dbHost = __ENV.DB_HOST || \"10.0.132.214\";\nconst dbPort = __ENV.DB_PORT || \"4000\";\nconst dbName = __ENV.DB_NAME || \"test\";\nconst dbUser = __ENV.DB_USER || \"root\";\nconst dbPassword = __ENV.TIDB_PASSWORD || \"password\";\n\nconst connectionString = `${dbUser}:${dbPassword}@tcp(${dbHost}:${dbPort})/${dbName}?tls=skip-verify`;\nconst db = sql.open('mysql', connectionString);\nconst inserts = new Counter('rows_inserts');\nconst duplicate = new Counter('duplicate_inserts');\nconst SPLIT = ', ';\nconst MetaTableExistsQuery = `SELECT COUNT(*) AS table_exists FROM information_schema.tables  WHERE table_schema = 'test' AND table_name = 'ge_metadata';`;\nconst MetaCountQuery = `SELECT AUTO_INCREMENT FROM information_schema.tables WHERE table_schema = 'test' AND table_name = 'ge_metadata';`;\n\nlet scenarios = {\n    insertData: {\n        executor: 'ramping-vus',\n        exec: 'insertData',\n        startTime: '0m', // Start after 5 minutes\n        startVUs: 50,\n        stages: [\n            {duration: '5m', target: 100}, // Ramp up to 50 VUs over the first 5 minutes\n            {duration: '5m', target: 100}, // Steady at 100 VUs over the next 5 minutes\n            {duration: '5m', target: 200}, // Ramp up another 100 VUs over the next 5 minutes\n            {duration: '5m', target: 200}, // Steady at 200 VUs over the next 5 minutes\n            {duration: '5m', target: 50} // Ramp down to  25 VUs for the next 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    },\n};\n\n// Options configuration\nexport const options = {\n    discardResponseBodies: true,\n    scenarios: scenarios,\n};\n\n// Type guard to check if the error is a DBError\nfunction isDBError(error: unknown): error is DBError {\n    return (error as DBError).value !== undefined;\n}\n\nexport function setup() {\n    let res = sql.query(db, MetaTableExistsQuery);\n    let rowCount = parseInt(String.fromCharCode(res[0][\"table_exists\"]));\n    console.log(rowCount);\n    if (res[0].table_exists === 0) {\n        throw new Error(\"Table 'ge_metadata' does not exist. Terminating the script.\");\n    } else {\n        console.log(\"Table 'ge_metadata' exists. Proceeding with the script.\");\n        let res = sql.query(db, MetaCountQuery);\n        let rowCount = parseInt(String.fromCharCode(...res[0][\"AUTO_INCREMENT\"], 10));\n        return {rowCount};\n    }\n}\n\n// Teardown function\nexport function teardown() {\n    db.close();\n}\n\nfunction getRandomValueForType(type: string) {\n    switch (type) {\n        case 'VARCHAR(255)':\n            return `'${randomString(16)}'`;\n        case 'BIGINT':\n            return randomIntBetween(1, 10000).toString();\n        default:\n            return 'NOW(5)';\n    }\n}\n\n// Function to insert data into a GE table\nexport function insertData(data: { rowCount: number }) {\n    let geData = readGeData(data.rowCount);\n    let insertQuery = generateInsertQuery(geData.tenant_id, geData.ge_name, geData.columns);\n    try {\n        db.exec(insertQuery);\n        inserts.add(1);\n    } catch (error) {\n        if (isDBError(error) && error.value.number === 1062) {\n            duplicate.add(1);\n        } else {\n            console.error(`Error executing insert query: ${error}`);\n            console.error(`Failed SQL: ${insertQuery}`);\n        }\n    }\n}\n\nfunction readGeData(id: number): GeMetadata {\n    const randomID = randomIntBetween(1, id);\n    let query = `SELECT tenant_id, ge_name, columns, indexes FROM ge_metadata where id = ${randomID};`;\n    let resultSet = sql.query(db, query);\n    return {\n        tenant_id: parseInt(String.fromCharCode(...resultSet[0][\"tenant_id\"]), 10),\n        ge_name: String.fromCharCode(...resultSet[0][\"ge_name\"]),\n        columns: JSON.parse(String.fromCharCode(...resultSet[0][\"columns\"])),\n        indexes: JSON.parse(String.fromCharCode(...resultSet[0][\"indexes\"]))\n    };\n}\n\n// Function to generate the SQL query for inserting data\nfunction generateInsertQuery(tenantId: number, geName: string, columns: Column[]): string {\n    let cols: string[] = [];\n    let values: string[] = [];\n\n    const [primaryKeyCol, ...otherColumns] = columns;\n    if (primaryKeyCol.type !== 'BIGINT') {\n        cols.push(primaryKeyCol.name);\n        values.push(getRandomValueForType(primaryKeyCol.type));\n    }\n    otherColumns.forEach(col => {\n        cols.push(col.name);\n        values.push(getRandomValueForType(col.type));\n    });\n    return `INSERT INTO tenant_${tenantId}_${geName} (${cols.join(SPLIT)}) VALUES (${values.join(SPLIT)});`;\n}\n\n\n/*\nResult\n\ndata_received........: 0 B   0 B/s\ndata_sent............: 0 B   0 B/s\niteration_duration...: avg=118.81ms min=115.7µs med=111.18ms max=2.21s p(90)=132.32ms p(95)=149.11ms\niterations...........: 63142 150.1965/s\nrows_inserts.........: 62799 149.380602/s\nvus..................: 26    min=0        max=50\nvus_max..............: 50    min=50       max=50\n\n*/","/* @ts-ignore */\nimport sql from 'k6/x/sql';\n/* @ts-ignore */\nimport { randomString, randomIntBetween } from \"https://jslib.k6.io/k6-utils/1.2.0/index.js\";\n\nimport { Counter } from 'k6/metrics';\n\n// Database connection setup\nconst dbHost = __ENV.DB_HOST || \"10.0.132.214\";\nconst dbPort = __ENV.DB_PORT || \"4000\";\nconst dbName = __ENV.DB_NAME || \"test\";\nconst dbUser = __ENV.DB_USER || \"root\";\nconst dbPassword = __ENV.TIDB_PASSWORD || \"password\";\n\nconst connectionString = `${dbUser}:${dbPassword}@tcp(${dbHost}:${dbPort})/${dbName}?tls=skip-verify`;\nconst db = sql.open('mysql', connectionString);\n\nconst reads = new Counter('join_reads');\n\ninterface GeMetadata {\n    tenant_id: number;\n    ge_name: string;\n    columns: string;\n    indexes: string;\n}\n\nlet scenarios = {\n    readJoinData: {\n        executor: 'ramping-vus',\n        exec: 'readJoinData',\n        startTime: '10m', // Start after 15 minutes\n        startVUs: 50,\n        stages: [\n            { duration: '5m', target: 50 }  // Ramp up to 50 VUs over 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    }\n};\n\n\n// Options configuration\nexport const options = {\n    discardResponseBodies: true,\n    scenarios: scenarios,\n};\n\nexport function setup() {\n    let checkTableQuery = `SELECT COUNT(*) AS table_exists \n                           FROM information_schema.tables \n                           WHERE table_schema = 'test' \n                             AND table_name = 'ge_metadata';`;\n\n    let res = sql.query(db, checkTableQuery);\n    if (res[0].table_exists === 0) {\n        throw new Error(\"Table 'ge_metadata' does not exist. Terminating the script.\");\n    } else {\n        console.log(\"Table 'ge_metadata' exists. Proceeding with the script.\");\n    }\n    // Additional setup logic, if any...\n}\n\n// Teardown function\nexport function teardown() {\n    db.close();\n}\n\nfunction readGeData(limit: number): GeMetadata[] {\n    let query = `SELECT tenant_id, ge_name, columns, indexes FROM ge_metadata ORDER BY RAND() LIMIT ${limit};`;\n    let resultSet = sql.query(db, query);\n    let geData: GeMetadata[] = [];\n\n    for (let row of resultSet) {\n        geData.push({\n            tenant_id: parseInt(String.fromCharCode(...row.tenant_id), 10),\n            ge_name: String.fromCharCode(...row.ge_name),\n            columns: String.fromCharCode(...row.columns),\n            indexes: String.fromCharCode(...row.indexes)\n        });\n    }\n    return geData;\n}\n\nfunction splitColumnsAndIndexes(metadata: GeMetadata): { cols: string[], indexes: string[] } {\n    const cols = metadata.columns.split(',').map(col => col.trim().split(' ')[0]);\n    const indexes = metadata.indexes.split(',').map(index => index.trim());\n    return { cols, indexes };\n}\n\nfunction generateJoinQuery(metadata1: GeMetadata, metadata2: GeMetadata, joinType: number): string {\n    const { cols: cols1, indexes: indexes1 } = splitColumnsAndIndexes(metadata1);\n    const { cols: cols2, indexes: indexes2 } = splitColumnsAndIndexes(metadata2);\n\n    let joinCol1: string, joinCol2: string;\n    switch (joinType) {\n        case 1: // Join between indexed and indexed columns\n            joinCol1 = indexes1[randomIntBetween(0, indexes1.length - 1)];\n            joinCol2 = indexes2[randomIntBetween(0, indexes2.length - 1)];\n            break;\n        case 2: // Join between indexed and non-indexed columns\n            joinCol1 = indexes1[randomIntBetween(0, indexes1.length - 1)];\n            joinCol2 = cols2.filter(col => !indexes2.includes(col))[randomIntBetween(0, cols2.length - 1)];\n            break;\n        default: // Join between two non-indexed columns\n            joinCol1 = cols1.filter(col => !indexes1.includes(col))[randomIntBetween(0, cols1.length - 1)];\n            joinCol2 = cols2.filter(col => !indexes2.includes(col))[randomIntBetween(0, cols2.length - 1)];\n            break;\n    }\n\n    return `SELECT * FROM tenant_${metadata1.tenant_id}_${metadata1.ge_name} a JOIN tenant_${metadata2.tenant_id}_${metadata2.ge_name} b ON a.${joinCol1} = b.${joinCol2} LIMIT 10;`;\n}\n\nexport function readJoinData() {\n    let [metadata1, metadata2] = readGeData(2);\n    if (!metadata1 || !metadata2) {\n        console.error('Insufficient GE metadata found for join reading');\n        return;\n    }\n\n    let queryType = Math.random() < 0.5 ? 1 : (Math.random() < 0.67 ? 2 : 3); // Randomly choose query type\n    let joinQuery = generateJoinQuery(metadata1, metadata2, queryType);\n\n    try {\n        let response = db.query(joinQuery);\n        if (response != null) {\n            console.log(`Read query type ${queryType} executed successfully`);\n            reads.add(1);\n        }\n    } catch (error) {\n        console.error(`Error executing join read query type ${queryType}: ${error}`);\n    }\n}\n\n/* \nResult\n\ndata_received........: 0 B   0 B/s\ndata_sent............: 0 B   0 B/s\niteration_duration...: avg=1.17s min=93.83µs med=363.85ms max=35.11s p(90)=786.17ms p(95)=1.69s\niterations...........: 13555 14.644529/s\njoin_reads...........: 8600  9.291254/s\nvus..................: 2     min=0       max=50\nvus_max..............: 50    min=50      max=50\n\n*/","/* @ts-ignore */\nimport sql from 'k6/x/sql';\n/* @ts-ignore */\nimport { randomString, randomIntBetween } from \"https://jslib.k6.io/k6-utils/1.2.0/index.js\";\n\nimport { Counter } from 'k6/metrics';\n\n// Database connection setup\nconst dbHost = __ENV.DB_HOST || \"10.0.132.214\";\nconst dbPort = __ENV.DB_PORT || \"4000\";\nconst dbName = __ENV.DB_NAME || \"test\";\nconst dbUser = __ENV.DB_USER || \"root\";\nconst dbPassword = __ENV.TIDB_PASSWORD || \"password\";\n\nconst connectionString = `${dbUser}:${dbPassword}@tcp(${dbHost}:${dbPort})/${dbName}?tls=skip-verify`;\nconst db = sql.open('mysql', connectionString);\n\nconst reads = new Counter('rows_reads');\nconst SPLIT = ', ';\n\ninterface GeMetadata {\n    tenant_id: number;\n    ge_name: string;\n    columns: string;\n    indexes: string;\n}\n\nlet scenarios = {\n    readData: {\n        executor: 'ramping-vus',\n        exec: 'readData',\n        startTime: '6m', // Start after 10 minutes\n        startVUs: 50,\n        stages: [\n            { duration: '2m', target: 50 }, // Ramp up to 40 VUs over the first 5 minutes\n            { duration: '2m', target: 80 }  // Stay at 50 VUs for the next 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    },\n};\n\n\n// Options configuration\nexport const options = {\n    discardResponseBodies: true,\n    scenarios: scenarios,\n};\n\nexport function setup() {\n    let checkTableQuery = `SELECT COUNT(*) AS table_exists \n                           FROM information_schema.tables \n                           WHERE table_schema = 'test' \n                             AND table_name = 'ge_metadata';`;\n\n    let res = sql.query(db,checkTableQuery);\n    if (res[0].table_exists === 0) {\n        throw new Error(\"Table 'ge_metadata' does not exist. Terminating the script.\");\n    } else {\n        console.log(\"Table 'ge_metadata' exists. Proceeding with the script.\");\n    }\n    // Additional setup logic, if any...\n}\n\n// Teardown function\nexport function teardown() {\n    db.close();\n}\n\nfunction readGeData(limit: number): GeMetadata[] {\n    let query = `SELECT tenant_id, ge_name, columns, indexes FROM ge_metadata ORDER BY RAND() LIMIT ${limit};`;\n    let resultSet = sql.query(db, query);\n    let geData: GeMetadata[] = [];\n\n    for (let row of resultSet) {\n        geData.push({\n            tenant_id: parseInt(String.fromCharCode(...row.tenant_id), 10),\n            ge_name: String.fromCharCode(...row.ge_name),\n            columns: String.fromCharCode(...row.columns),\n            indexes: String.fromCharCode(...row.indexes)\n        });\n    }\n\n    return geData;\n}\n\n// Function to read data from a GE table with different types of queries\nexport function readData() {\n    // Randomly select a GE metadata record\n    let { tenant_id, ge_name, columns, indexes }: GeMetadata = readGeData(1)[0];\n\n    let cols: string[] = [];\n    let defaultValueMap = new Map<string, string>(); // Map to store default values for each column\n    let indx = indexes.split(SPLIT);\n\n    columns.split(SPLIT).forEach(colDef => {\n        let [colName, colType] = colDef.trim().split(' ');\n        cols.push(colName);\n        let defaultValue = colType === 'VARCHAR(255)' ? `'${randomString(16)}'` :\n                           colType === 'INT' ? randomIntBetween(1, 10000).toString() :\n                           'NOW(5)'; // Default value for other types\n        defaultValueMap.set(colName, defaultValue);\n    });\n\n    let nonIndexedCols = cols.filter(col => !indx.includes(col));\n    let queryType = randomIntBetween(1, 3); // Randomly choose query type\n    let readQuery;\n\n    switch (queryType) {\n        case 1: // Queries using indexes\n            let randomCol = indx[randomIntBetween(0, indx.length - 1)];\n            let defaultValue = defaultValueMap.get(randomCol);\n            readQuery = `SELECT * FROM tenant_${tenant_id}_${ge_name} WHERE ${randomCol} = ${defaultValue} LIMIT 10;`;\n            break;\n        case 2: // Queries without indexes\n            let randomCol2 = nonIndexedCols[randomIntBetween(0, nonIndexedCols.length - 1)];\n            let defaultValue2 = defaultValueMap.get(randomCol2);\n            readQuery = `SELECT * FROM tenant_${tenant_id}_${ge_name} WHERE ${randomCol2} = ${defaultValue2} LIMIT 10;`;\n            break;\n        default: // Mixed queries\n            let randomIndexedCol = indx[randomIntBetween(0, indx.length - 1)];\n            let randomNonIndexedCol = nonIndexedCols[randomIntBetween(0, nonIndexedCols.length - 1)];\n            let defaultValueIndexed = defaultValueMap.get(randomIndexedCol);\n            readQuery = `SELECT * FROM tenant_${tenant_id}_${ge_name} WHERE ${randomIndexedCol} = ${defaultValueIndexed} AND ${randomNonIndexedCol} IS NOT NULL LIMIT 10;`;\n            break;\n    }\n\n    try {\n        console.log(readQuery);\n        let response = db.query(readQuery);\n        if (response != null){\n            console.log(`Read query type ${queryType} executed successfully`);\n            reads.add(1);\n        }\n    } catch (error) {\n        console.error(`Error executing read query type ${queryType}: ${error}`);\n    }\n}\n\n/* \nResults\n\ndata_received........: 0 B  0 B/s\ndata_sent............: 0 B  0 B/s\niteration_duration...: avg=3.54s min=116.87µs med=374.66ms max=1m38s p(90)=1.44s p(95)=31.67s\niterations...........: 4279 6.774115/s\nrows_reads...........: 3962 6.27227/s\nvus..................: 4    min=0      max=79\nvus_max..............: 80  \n\n1. Unresponsive at 65-70, with constant timeouts\n\n*/","module.exports = require(\"https://jslib.k6.io/k6-utils/1.2.0/index.js\");","module.exports = require(\"k6/metrics\");","module.exports = require(\"k6/x/sql\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* @ts-ignore */\nimport sql from 'k6/x/sql';\nimport { createGE } from './tidb-createGE-test';\nimport { insertData } from './tidb-insertData-test';\nimport { readData } from './tidb-readData-test';\nimport { readJoinData } from './tidb-joinData-test';\n\n// Database connection setup\nconst dbHost = __ENV.DB_HOST || \"gateway01.ap-southeast-1.prod.aws.tidbcloud.com\";\nconst dbPort = __ENV.DB_PORT || \"4000\";\nconst dbName = __ENV.DB_NAME || \"test\";\nconst dbUser = __ENV.DB_USER || \"gL64LSe6ggDbrgk.root\";\nconst dbPassword = __ENV.DB_PASSWORD || \"password\";\nconst connectionString = `${dbUser}:${dbPassword}@tcp(${dbHost}:${dbPort})/${dbName}?tls=skip-verify`;\nconst db = sql.open('mysql', connectionString);\n\n// Scenarios configuration\n/*  Create     Insert     Read      Read with Join\n0   50           0          0           0\n5   20          50          0           0\n10  10          50          40          0\n15  0           0           50          50\n*/\n\nlet scenarios = {\n    createGE: {\n        executor: 'ramping-vus',\n        exec: 'createGE',\n        startVUs: 50,\n        stages: [\n            { duration: '10s', target: 50 }, // Stay at 50 VUs for the first 5 minutes\n            { duration: '20s', target: 20 }, // Reduce to 20 VUs over the next 10 minutes\n            { duration: '10s', target: 10 }   // Further reduce to 10 VUs for the last 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    },\n    insertData: {\n        executor: 'ramping-vus',\n        exec: 'insertData',\n        startTime: '1m', // Start after 5 minutes\n        startVUs: 0,\n        stages: [\n            { duration: '1m', target: 50 }, // Ramp up to 50 VUs over the first 5 minutes\n            { duration: '1m', target: 25 } // Ramp down to  25 VUs for the next 10 minutes\n        ],\n        gracefulRampDown: '30s',\n    },\n    readData: {\n        executor: 'ramping-vus',\n        exec: 'readData',\n        startTime: '2m', // Start after 10 minutes\n        startVUs: 0,\n        stages: [\n            { duration: '2m', target: 40 }, // Ramp up to 40 VUs over the first 5 minutes\n            { duration: '4m', target: 50 }  // Stay at 50 VUs for the next 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    },\n    readJoinData: {\n        executor: 'ramping-vus',\n        exec: 'readJoinData',\n        startTime: '4m', // Start after 15 minutes\n        startVUs: 0,\n        stages: [\n            { duration: '2m', target: 50 }  // Ramp up to 50 VUs over 5 minutes\n        ],\n        gracefulRampDown: '30s',\n    }\n};\n\n\n// Options configuration\nexport const options = {\n    discardResponseBodies: true,\n    scenarios: scenarios,\n};\n\nexport function setup() {\n    db.exec(`CREATE TABLE IF NOT EXISTS test.ge_metadata (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        tenant_id INT NOT NULL,\n        ge_name VARCHAR(255) NOT NULL,\n        columns TEXT NOT NULL,\n        indexes TEXT NOT NULL\n    );`);\n    // Additional setup logic...\n}\n\n// Teardown function\nexport function teardown() {\n    db.close();\n}\n\nexport { createGE, insertData, readData, readJoinData };\n"],"names":["sql","randomIntBetween","exec","Counter","dbHost","__ENV","DB_HOST","dbPort","DB_PORT","dbName","DB_NAME","dbUser","DB_USER","dbPassword","TIDB_PASSWORD","connectionString","concat","db","open","tables","types","scenarios","createGE","executor","startVUs","startTime","stages","duration","target","gracefulRampDown","options","discardResponseBodies","isDBError","error","value","undefined","setup","teardown","close","generateRandomColumns","columns","numCols","columnNames","Set","primaryType","primaryColName","push","name","type","add","length","colName","has","selectRandomIndexes","maxIndexes","selectedIndexes","size","Math","min","randomIndex","Array","from","tenantId","vu","idInTest","geName","iterationInScenario","_columns","_toArray","primaryKeyCol","otherColumns","slice","indexes","createTableSQL","map","_ref","join","insertMetaSQL","JSON","stringify","forEach","indexCol","createIndexSQL","console","log","number","randomString","inserts","duplicate","SPLIT","MetaTableExistsQuery","MetaCountQuery","insertData","res","query","rowCount","parseInt","String","fromCharCode","table_exists","Error","apply","_toConsumableArray","getRandomValueForType","toString","data","geData","readGeData","insertQuery","generateInsertQuery","tenant_id","ge_name","id","randomID","resultSet","parse","cols","values","col","reads","readJoinData","checkTableQuery","limit","_iterator","_createForOfIteratorHelper","_step","s","n","done","row","err","e","f","splitColumnsAndIndexes","metadata","split","trim","index","generateJoinQuery","metadata1","metadata2","joinType","_splitColumnsAndIndex","cols1","indexes1","_splitColumnsAndIndex2","cols2","indexes2","joinCol1","joinCol2","filter","includes","_readGeData","_readGeData2","_slicedToArray","queryType","random","joinQuery","response","readData","_readGeData$","defaultValueMap","Map","indx","colDef","_colDef$trim$split","_colDef$trim$split2","colType","defaultValue","set","nonIndexedCols","readQuery","randomCol","get","randomCol2","defaultValue2","randomIndexedCol","randomNonIndexedCol","defaultValueIndexed","DB_PASSWORD"],"sourceRoot":""}